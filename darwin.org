#+TITLE: Darwin (Mac OS X) Specific Settings
#+OPTIONS: toc:4 h:4
#+STARTUP: showeverything

* Overview

This file contains configuration items specific to the Mac. 

#+BEGIN_SRC emacs-lisp :padline no
;;; darwin.el -- Automatically generated darwin configuration
;;;
;;; This file is generated by tangling darwin.org.
;;; DO NOT EDIT
;;;
;;; Commentary:
;;;
;;; See darwin.org for complete documentation
;;; 
;;; Code:
;;;

#+END_SRC

* Applications
** aspell

Use =aspell= instead of =ispell=.

#+BEGIN_SRC emacs-lisp
(setq-default ispell-program-name "/usr/local/bin/aspell")
#+END_SRC
** markown

Use =mmd= (MultiMarkdown) instead of =md= (Markdown).

#+BEGIN_SRC emacs-lisp
(setq markdown-command "/usr/local/bin/mmd")
#+END_SRC

** Node

Make sure node path is set up.

#+BEGIN_SRC emacs-lisp
(setenv "NODE_PATH" "/usr/local/lib/node_modules")
#+END_SRC

* Special Configuration

Prevent finder from opening new frames.

#+BEGIN_SRC emacs-lisp
(setq ns-pop-up-frames 'nil)
#+END_SRC

Take advantage of the trash can on the Mac.

#+BEGIN_SRC emacs-lisp
(setq delete-by-moving-to-trash t
      trash-directory "~/.Trash/emacs")
#+END_SRC

Include spotlight data into helm.

#+BEGIN_SRC emacs-lisp
(if (package-installed-p 'helm)
    (progn (require 'helm-misc)
     (setq helm-for-files-preferred-list
           (quote
            (helm-c-source-ffap-line
             helm-c-source-ffap-guesser
             helm-c-source-buffers-list
             helm-c-source-recentf
             helm-c-source-bookmarks
             helm-c-source-file-cache
             helm-c-source-files-in-current-dir
             helm-c-source-mac-spotlight)))))
#+END_SRC

* Tweaks

Flyspell depends on =mouse-3= which does not work well without a 3rd
button. Fix that.

#+BEGIN_SRC emacs-lisp
(eval-after-load "flyspell"
  '(progn
     (define-key flyspell-mouse-map [down-mouse-3] #'flyspell-correct-word)
     (define-key flyspell-mouse-map [moude-3] #'undefined)))
#+END_SRC

* Notification Messages

This function posts messages to the Mac Notification Center. Provides a Mac
specific way to display desktop notifications via simple AppleScript.

#+BEGIN_SRC emacs-lisp
(defun jme/message-notify (title text)
    "Post a message with the given TITLE and TEXT to the notifications center.

  This is a Mac OS X specific function.  Note that double-quotes that occur
  in the TITLE and the TEXT are replaced with single quotes."

      (let ((title (replace-regexp-in-string "\"" "'" title))
            (text (replace-regexp-in-string "\"" "'" text)))
        (do-applescript (concat
                         "display notification \""
                         text
                         "\" with title \""
                         title
                         "\" sound name \"Pop\""))))

#+END_SRC
